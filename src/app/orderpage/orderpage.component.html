<div class="row">
  <!--  <div class="col-md-12">
        <h4>Invoice</h4>
    </div>

-->
</div>
<section class="invoice-template">
    <div class="card">
        <div class="card-body p-3">
            <div id="invoice-template" class="card-block">
                <!-- Invoice Company Details -->
                <div id="invoice-company-details" class="row">
                    <div class="col-6 text-left">
                        <img src="assets/img/logo.png" alt="company logo" class="mb-2" width="70">
                        <ul class="px-0 list-unstyled">
                            <li class="text-bold-800">KlenHub</li>
                            <li>Dry Cleaning,</li>
                            <li>Cairo,</li>
                            <li>Fifth Settelment,</li>
                            <li>Egypt</li>
                        </ul>

                    </div>

                    <div class="col-6 text-right">
                        <h2>Order Status</h2>
                        <h4>{{orderDetails.status}}</h4>
                                        <label for="issueinput6">Status</label>
                                        <select [(ngModel)]="selectedOption" id="issueinput6" name="status" class="form-control" data-toggle="tooltip" data-trigger="hover" data-placement="top" data-title="Status">
                                            <option value="confirmed">Confirm</option>
                                            <option value="on the way">On the Way</option>
                                            <option value="archieved">Done</option>
                                            <option value="canceled">Cancel</option>
                                        </select>
                        <ul class="px-0 list-unstyled">
                            <li><button (click)="changeOrder(orderDetails.orderNumber, selectedOption)" type="button" class="btn btn-primary btn-raised my-1">Change Status</button></li>
                            <li>Balance Due</li>
                            <li class="lead text-bold-800">{{orderDetails.grandTotal}}EGP</li>
                        </ul>
                    </div>
                </div>
                <!--/ Invoice Company Details -->
                <!-- Invoice Customer Details -->
                <div id="invoice-customer-details" class="row pt-2">
                    <div class="col-sm-12 text-left">
                        <p class="text-muted">User Info</p>
                    </div>
                    <div class="col-6 text-left">
                        <ul class="px-0 list-unstyled">
                            <li class="text-bold-800">{{orderDetails.user.username}}</li>
                            <li>{{orderDetails.shipping.area}}</li>
                            <li>Building Type: {{orderDetails.shipping.address.buildingType}}</li>
                            <li>Cairo,</li>
                            <li>Egypt.</li>
                        </ul>
                    </div>
                    <div class="col-6 text-right">
                        <!-- <p><span class="text-muted">Invoice Date :</span> 24/02/2019</p> -->
                        <p><span class="text-muted">Pickup Time :</span> {{orderDetails.pickupTime}}</p>
                        <p><span class="text-muted">Pickup Date :</span> {{orderDetails.pickupDate | date: 'dd/MM/yyyy'}}</p>
                        <!-- <p><span class="text-muted">Due Date :</span> 24/02/2019</p> -->
                    </div>
                </div>
                <!--/ Invoice Customer Details -->
                <!-- Invoice Items Details -->
                    <a (click)="buttonClicked(orderDetails._id, modal2)" class="btn btn-raised btn-round btn-primary" >Add Products</a>
                <div id="invoice-items-details" class="pt-2">
                    <div class="row">
                        <div class="table-responsive col-sm-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Item &amp; Description</th>
                                        <th class="text-right">Quantity</th>
                                        <th class="text-right">Amount</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody *ngIf="orderDetails.products">
                                    <tr *ngFor="let product of orderDetails.products">
                                        <th scope="row">{{product.label}}</th>
                                        <td>
                                            <p>{{product.name}}</p>
                                            <p class="text-muted">{{product.service}}</p>
                                        </td>
                                        <td class="text-right">{{product.quantity}}</td>
                                        <td class="text-right">{{product.price}}EGP</td>
                                        <td >                        <div class="col-md-3 col-sm-12 text-center">
                            <button  [routerLink]="['/label', product.label ]" type="button" class="btn btn-primary btn-raised my-1"><i class="fa fa-paper-plane-o"></i> Print Order</button>
                        </div></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12 text-left">
                            <p class="lead">Payment Methods:</p>
                            <div class="row">
                                <div class="col-12">
                                    <table class="table table-borderless table-sm">
                                        <tbody>
                                            <tr>
                                                <td>Name:</td>
                                                <td class="text-right">{{orderDetails.user.username}}</td>
                                            </tr>
                                            <tr>
                                                <td>Email:</td>
                                                <td class="text-right">{{orderDetails.shipping.email}}</td>
                                            </tr>
                                            <tr>
                                                <td>Cash:</td>
                                                <td class="text-right">{{orderDetails.grandTotal}}EGP</td>
                                            </tr>
<!--                                             <tr>
                                                <td>Wallet:</td>
                                                <td class="text-right">BTNPP34</td>
                                            </tr> -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <p class="lead">Total due</p>
                            <div class="table-responsive">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>Sub Total</td>
                                            <td class="text-right">{{orderDetails.subTotal}}EGP</td>
                                        </tr>
                                        <tr>
                                            <td>TAX (12%)</td>
                                            <td class="text-right">0EGP</td>
                                        </tr>
                                        <tr>
                                            <td class="text-bold-800">Total</td>
                                            <td class="text-bold-800 text-right"> {{orderDetails.grandTotal}}EGP</td>
                                        </tr>
                                        <tr>
                                            <td>Payment Made</td>
                                            <td class="pink text-right">0EGP</td>
                                        </tr>
                                        <tr class="bg-grey bg-lighten-4">
                                            <td class="text-bold-800">Balance Due</td>
                                            <td class="text-bold-800 text-right">{{orderDetails.grandTotal}}EGP</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center">
                                <p>Authorized person</p>
                                <img src="assets/img/pages/signature-scan.png" alt="signature" class="width-250">
                                <h6>Hossam El-Hariry</h6>
                                <p class="text-muted">Managing Director</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Invoice Footer -->
                <div id="invoice-footer">
                    <div class="row">
                        <div class="col-md-9 col-sm-12">
                            <h6>Terms &amp; Condition</h6>
                            <p>The Terms and Conditions goes here</p>
                        </div>
                        <div class="col-md-3 col-sm-12 text-center">
                            <button (click)="print()" type="button" class="btn btn-primary btn-raised my-1"><i class="fa fa-paper-plane-o"></i> Print Order</button>
                        </div>
                    </div>
                </div>
                <!--/ Invoice Footer -->
            </div>
        </div>
    </div>
</section>




<!--popup model for delivery man-->


<ng-template #modal let-modal let-c="close" style="background-color: transparent;">
<div style="padding: 0px;" class="col-lg-12 col-sm-12 col-md-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title" id="basic-layout-colored-form-control" >Edit's Smell</h4>
                </div>
                <div class="card-body">
                    <div class="px-3">                      

                        <form class="form">
                            <div class="form-body">

                                <h4 class="form-section"><i class="ft-mail"></i> Smell Info</h4>

                                <div class="form-group">
                                    <label for="userinput5">Smell's Name</label>
                                    <input class="form-control border-primary" type="text"  id="userinput5">
                                </div>


                                <div class="form-group">
                                        <fieldset class="form-group">
                                            <label for="basicSelect">Smell Status</label>
                                            <select class="form-control" id="basicSelect">
                                              <option>Select Option</option>
                                              <option selected>Active</option>
                                              <option>Disabled</option>

                                            </select>
                                        </fieldset>   
                                </div>

                                <div class="form-group">
                                    <label for="userinput8">Smell's Description</label>
                                    <textarea id="userinput8" rows="5" class="form-control border-primary" name="bio" placeholder=""></textarea>
                                </div>

                            </div>

                            <div class="form-actions right">
                                <button (click)="c('Close click')" type="button" class="btn btn-raised btn-warning mr-1">
                                    <i class="ft-x"></i> Cancel
                                </button>
                                <button  (click)="c('Close click')" type="button" class="btn btn-raised btn-primary">
                                    <i class="fa fa-check-square-o"></i> Save
                                </button>

                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
</ng-template>









<!--add new smell Modal-->
<ng-template #modal2 let-modal let-c="close" style="background-color: transparent;">
<div style="padding: 0px;" class="col-lg-12 col-sm-12 col-md-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title" id="basic-layout-colored-form-control">Add Products to Order</h4>
                </div>
                <div class="card-body">
                    <div class="px-3">                      

                        <form class="form">
                            <div class="form-body">

                                <h4 class="form-section"><i class="ft-mail"></i>Order</h4>

<!--                                <div class="form-group">
                                        <fieldset class="form-group">
                                            <label for="basicSelect">Select Delivery Man</label>
                                            <select class="form-control" id="basicSelect">
                                              <option>Select Delivery Man</option>
                                              <option *ngFor="let man of deliverymen" value="{{man._id}}"
                                               (click)="takedeliverymanid(man)">{{man.username}}</option>
                                            </select>
                                        </fieldset>   
                                </div> -->


                                        <div class="card">
            <div class="card-body">

                                <div class="card-block">
                    <h4 class="card-title">Selected Products</h4>
                    <!-- <p class="card-text">C</p> -->


                </div>
                <form [formGroup]="addProductsForm">
                  <ul class="list-group">
                     <li *ngFor="let p of selectedProduct; let i=index">
                    <div class="row">
                        <div class="col-sm-4">
                                    <p > {{p.name}}</p>
                                    <input style="visibility: hidden;"  type="text" name="" value="{{p._id}}" formControlName="productId">

                        </div>
                        <div class="col-sm-4">
                              <select class="form-control" id="basicSelect" formControlName="service">
                                              <option value="washing">Washing</option>
                                              <option value="ironing">Ironing</option>
                                              <option value="fullservice">Full-Service</option>
                                             
                                            </select>
                        </div>
                                      <div class="col-sm-3">

                                <div class="form-group">
                                    <input formControlName="quantity" class="form-control border-primary" type="number"  id="userinput5">
                                </div>

                        </div>
                        <div class="col-sm-1">

                                                            <p (click)="delete(i)" style="float: right;">X</p>

                        </div>
                    </div>
                   
                 <!--         <span  class="badge bg-primary float-right"></span> -->



               
                                          
          



                    </li>
     <button (click)="addProducts()" type="button" class="btn btn-primary btn-raised my-1"><i class="fa fa-paper-plane-o"></i>
        Add Products
     </button>
                </ul>
            </form>


                <div class="card-block">
                    <h4 class="card-title">Select Products</h4>
                    <!-- <p class="card-text">C</p> -->
                </div>
                <ul class="list-group">
<!--                     <option *ngFor="let product of products['clothes']" class="list-group-item" >
                        <span  (click)="takedeliverymanid(man)" class="badge bg-primary float-right"></span> {{product.name}}


                    </option> -->


                    <!-- -->
                                     <ul class="list-group">
                     <li *ngFor="let p of products['clothes'] let i=index">

                        <form [formGroup]="addProductsForm">
                            
                    <div class="row">
                        <div class="col-sm-3">
                                    <p > {{p.name}}</p>
                                    <input style="visibility: hidden;"  type="text" name="" value="{{p._id}}" formControlName="productId">

                        </div>
                        <div class="col-sm-4">
                              <select class="form-control" id="basicSelect" formControlName="service">
                                              <option value="washing">Washing</option>
                                              <option value="ironing">Ironing</option>
                                              <option value="fullservice">Full-Service</option>
                                             
                                            </select>
                        </div>
                                      <div class="col-sm-3">

                                <div class="form-group">
                                    <input placeholder="quantity" formControlName="quantity" class="form-control border-primary" type="number"  id="userinput5">
                                </div>

                        </div>
                        <div class="col-sm-2">

     <button (click)="takeproduct(p, addProductsForm)" type="button" class="btn btn-primary btn-raised my-1"><i class="fa fa-plus"></i>
       
     </button>
                        </div>
 
                    </div>

                                            </form>

                   
                 <!--         <span  class="badge bg-primary float-right"></span> -->



               
                                          
          



                    </li>

                </ul>
                </ul>



            </div>
        </div>
                            </div>
                            <div class="form-actions right">
                                <button (click)="c('Close click')" type="button" class="btn btn-raised btn-warning mr-1">
                                    <i class="ft-x"></i> Cancel
                                </button>
                                <button  (click)="addDeliveryMan(orderID, deliverymanhimself)" type="button" class="btn btn-raised btn-primary">
                                    <i class="fa fa-check-square-o"></i> Save
                                </button>
                                <button   [routerLink]="['/orderpage', orderID  ]" type="button" class="btn btn-raised btn-primary">
                                    <i class="fa fa-check-square-o"></i> Order Page
                                </button>

                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
</ng-template>
<!--add new smell Modal Ends Here-->

<!--popup-->